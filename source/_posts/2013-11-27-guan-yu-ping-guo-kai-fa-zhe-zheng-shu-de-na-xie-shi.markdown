---
layout: post
title: "关于苹果开发者证书的那些事"
date: 2013-11-27 00:32:17 +0800
comments: true
categories: objc
---
这些东西都是根据自己的理解写的,估计有很多错误的地方,如果大家有发现什么不对的,麻烦跟我说一下.
尊重劳动者,转载请注明出处

1.首先通过苹果官网注册一个苹果账号,作为开发者账号,正常情况下账号都是电子邮件的方式,比如abc@ddd.com  
2.创建开发者证书,证书分为公钥和私钥两部分,公钥和私钥配对的情况下证书才是正常的,先生成私钥  
3.打开你苹果电脑点击应用程序->实用工具->钥匙串访问  
4.点击顶部左上角菜单钥匙串访问->证书助理->从证书颁发机构请求证书  
5.在弹出窗口中的用户电子邮件地址和CA电子邮件地址都填上你申请账号是用的电子邮件,abc@ddd.com  
6.然后选择存储到磁盘,继续,就会在你电脑上生成一个CertificateSigningRequest.certSigningRequest文件,这
个文件就是私钥  
<!--more-->
7.打开苹果开发者网站https://developer.apple.com/  
8.用你的账号登录之后从member center或者ios dev center进入开发者管理页面  
9.从左边的菜单中点击ios provisioning portal进入到ios配置门户管理页面  
10.进入之后在页面左边的菜单中第一个home没什么用就是介绍,点击进入certificates证书管理页面  
11.选择新建一个证书,在新的页面中应该会有个地方让你可以上传的文件的,把刚才生成的  
CertificateSigningRequest.certSigningRequest上传上去  
12.接着在certificates页面就会看到证书已经生成好了,正常的状态应该是issued,最后面的action栏对应的应该
是个download按钮,点击并下载证书  
13.下载回来的文件应该是ios\_distribution.cer,双击导入到钥匙串  
14,回到钥匙串查看证书,显示在列表中的是证书的公钥,正常的证书前面都应该有个三角行,点击展开之后下面那项
就是你的私钥  
15,公钥和私钥必须配对证书才是正确的,如果前面没有三角行说明没有私钥,如果有个性感的小红叉说明公私钥不
配对或者公钥有问题  
16.到此为止证书已经生成好了  
17.回到苹果官网的ios provisioning portal页面, certificates菜单已经介绍过了,接着说Devices  
18.devices就是管理你用来调试的设备的,很简单,先通过itunes或者itools等工具取得你要用来调试的设备的udid  
19.然后点击右上角的add devices添加设备,输入设备名称和udid就行了  
20.接下来到了左边菜单的app ids了,这个比较不好说明.简单点说就是添加你开发的应用的唯一标识符,苹果管理
所有的应用的时候必须有一个唯一标识符可以让他找到他想要的某个应用  
21.添加app ids要慎重一些,因为这个添加之后是永久的,永远不会被删除  
22.一般情况下要创建一个全球性的唯一标识符,都是通过域名作为前缀的方式来实现的,域名是全球唯一的,在这个
前提下避免不重复就容易的多,不知道苹果出于什么考虑,他要求的域名前缀必须是反转后的域名,比如你的公司域
名为ddd.com,那么前缀就是用com.ddd  
23.好了,现在开始添加app ids,点击右上角的new app id按钮  
24.出来的页面只有两个输入框,很容易明白,上面一个只要填入你的应用的名称就行了,比如你的应用叫test,那么
就输入test,下面的输入框就是输入你的域名前缀加你的应用名称,这个就是你的应用的唯一标识符,苹果叫做
bundle identifier,在这里应该输入com.ddd.test  
25.submit一下你的应用的app ids就建成了  
26.这里可能有人会有疑问,app ids不是建完就不能删除吗?那么我有很多个应用不是要建很多app ids?如果我开发
调试后应用不发布,不是浪费了一个appids,理论上是的,但是有一个方法可以少建几个app ids  
27.方法就是你可以建一个app ids,把应用的名称取为\*,这个app ids的bundle indentifier就是为com.ddd.\*,那么
多个应该就可以统一用一个app ids,这么做是有前提的,就是你的应用不能用到苹果一些必须找到你这个应用的服
务,比如消息推送,应用内付费等等...  
28.app ids也讲完了,接下来是pass type ids,大家一定都很期待吧,那么实话告诉你,这个我也不知道是干什么的,
反正我没用到这个不影响.  
29.接下来就是provisioning,这个的作用是生成一个预置文件,也就是我们经常提到的签名,每个应用都需要有签名
.  
30.签名分两种,一种是在真机调试的时候用的签名,另一种是发布时用的签名  
31.我们点击进去之后可以看到顶部的分页卡中就有区分了这两个签名,分别是development和distribution
32.创建一个开发用的证书(发布用的证书创建方法是一样的)  
33.在development选项卡下,选择new profile,然后profile name随便取个自己好理解的名字,接下来选择证书,然
后选择app ids,最后再选择你需要用来调试这个应用的设备,这些都是我们之前已经准备好的,手到擒来,非常感觉
很爽吧  
34.如果这个签名文件的app id是选择那个com.ddd.\*的,那么这个签名就是多个应用都能用  
35.好了,签名弄好之后可以点击后面的download按钮下载到本地,双击之后会自动导入到xcdoe中  
36,如果有多个预置文件(也就是签名文件)一个个下载麻烦,可以通过xcode自己刷新  
37.通过xcode->organizer->devices 点击右下角的refresh按钮会自动将你配置好的预置文件下载下来,正常的状
态应该是前面有个绿色小勾的valid profile  
38.好了,现在可以开始编写你的应用并通过真机调试了(如果发现签名选项中没有你建立的签名,可以把xcode全部
退出重新打开试试)  
39.为了更好的说明后面要提到的内容,这里先简单说一下怎么给应用添加签名  
40.在xcode目录树中选择你的项目,然后TARGETS->build settings 找到code signing,就是在这里签名了,选择你
先前设置好的签名就行了  
41.可以看到这里有两种方式需要签名,Debug和Release,我不清楚Release的签名是不是就是发布用的,但是调试的
时候我都是用的开发的签名就对了  
42.那么在发布的时候就需要修改这些签名,改成用发布的签名,这样好像不大方便,经常会忘记修改  
43.接着就是最后要讲的东西,解决这个一直修改签名的问题  
44.在xcode目录树中选中你的项目,然后PROJECT(注意不是TARGETS)->info 知道Configurations,可以看到这里有
两个预置好的配置,Debug和Release,点击底部的+号,会提示你拷贝份之前的配置  
45.随便选择一个拷贝一下,然后命名为publish  
46.现在回到签名的地方,你会发现,多了一个签名的位置,就是publish  
47.将publish的签名改成发布的签名  
48.最后我们要让发布时候系统自动选择发布的签名  
49.在每次发布的时候我们都要通过product->archive将项目先进行打包,那么我们只要设置这个打包的时候选择对
应的publish签名就行了  
50.选择菜单product->scheme->edit scheme,在弹出的窗口中选择左边最底部的archive,然后将对应的Build
Configuration选择为publish  
51.大功告成  
